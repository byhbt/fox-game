{"version":3,"sources":["gameState.js","constants.js","buttons.js","init.js"],"names":["gameState","current","clock","wakeTime","tick","console","log","startGame","wake","handleUserAction","icon","includes","changeWeather","cleanUpPoop","feed","window","bind","TICK_RATE","ICONS","toggleHighlighted","show","document","querySelector","classList","toggle","initButton","selectedIconIndex","buttonClick","target","contains","length","addEventListener","init","nextTimeToTick","Date","now","nextAnimationFrame","requestAnimationFrame"],"mappings":"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","file":"init.9d6cb373.js","sourceRoot":"../src","sourcesContent":["const gameState = {\n  current: \"INIT\",\n  clock: 1,\n  wakeTime: -1,\n  tick() {\n    this.clock++;\n    console.log(\"clock\", this.clock);\n\n    return this.clock;\n  },\n  startGame() {\n    console.log(\"hatching\");\n    this.current = \"HATCHING\";\n    this.wakeTime = this.clock + 3;\n  },\n  wake() {\n    console.log(\"awoken\");\n    this.current = \"IDLING\";\n    this.wakeTime = -1;\n  },\n  handleUserAction(icon) {\n    if (\n      [\"SLEEP\", \"FEEDING\", \"CELEBRATING\", \"HATCHING\"].includes(this.current)\n    ) {\n      return;\n    }\n\n    if (this.current == \"INIT\" || this.current == \"DEAD\") {\n      this.startGame();\n      return;\n    }\n\n    switch (icon) {\n      case \"weather\":\n        this.changeWeather();\n        break;\n      case \"poop\":\n        this.cleanUpPoop();\n        break;\n      case \"Feed\":\n        this.feed();\n        break;\n    }\n  },\n  changeWeather() {\n    console.log(\"Change weather\");\n  },\n  cleanUpPoop() {\n    console.log(\"Poop\");\n  },\n  feed() {\n    console.log(\"Feed\");\n  },\n};\n\nwindow.gameState = gameState;\nexport const handleUserAction = gameState.handleUserAction.bind(gameState);\nexport default gameState;\n","export const TICK_RATE = 3000;\nexport const ICONS = [\"fish\", \"poop\", \"weather\"];\n\n\n","import { ICONS } from \"./constants\";\n\nconst toggleHighlighted = (icon, show) => {\n  document\n    .querySelector(`.${ICONS[icon]}-icon`)\n    .classList.toggle(\"highlighted\", show);\n};\n\nexport default function initButton(handleUserAction) {\n  let selectedIconIndex = 0;\n\n  function buttonClick({ target }) {\n    if (target.classList.contains(\"left-btn\")) {\n      toggleHighlighted(selectedIconIndex, false);\n      selectedIconIndex = (2 + selectedIconIndex) % ICONS.length;\n      toggleHighlighted(selectedIconIndex, true);\n    } else if (target.classList.contains(\"right-btn\")) {\n      toggleHighlighted(selectedIconIndex, false);\n      selectedIconIndex = (1 + selectedIconIndex) % ICONS.length;\n      toggleHighlighted(selectedIconIndex, true);\n    } else {\n      handleUserAction(ICONS[selectedIconIndex]);\n    }\n  }\n\n  document.querySelector(\".buttons\").addEventListener(\"click\", buttonClick);\n}\n","import gameState, { handleUserAction } from \"./gameState\";\nimport { TICK_RATE } from \"./constants\";\nimport initButtons from \"./buttons\";\n\nasync function init() {\n  console.log(\"Starting game\");\n  // initButtons(gameState.handleUserAction);\n  initButtons(handleUserAction);\n  let nextTimeToTick = Date.now();\n\n  function nextAnimationFrame() {\n    const now = Date.now();\n\n    if (nextTimeToTick <= now) {\n      gameState.tick();\n      nextTimeToTick = now + TICK_RATE;\n    }\n\n    requestAnimationFrame(nextAnimationFrame);\n  }\n\n  requestAnimationFrame(nextAnimationFrame);\n}\n\ninit();\n"]}